<!doctype html>
<html ng-app="Demo">
<head>
	<meta charset="utf-8" />

	<title>
		Binding A Directive To Multiple Compilation And Linking Functions In AngularJS
	</title>
</head>
<body>

	<h1>
		Binding A Directive To Multiple Compilation And Linking Functions In AngularJS
	</h1>

	<p bn-emphasize>
		Hello world.
	</p>

	<p bn-emphasize>
		I hope all is well.
	</p>


	<!-- Load scripts. -->
	<script type="text/javascript" src="../../vendor/jquery/jquery-2.1.0.min.js"></script>
	<script type="text/javascript" src="../../vendor/angularjs/angular-1.3.6.min.js"></script>
	<script type="text/javascript">

		// Create an application module for our demo.
		var app = angular.module( "Demo", [] );


		// -------------------------------------------------- //
		// -------------------------------------------------- //


		// I replace all periods with exclamation points. People need to know I'm 
		// serious about the things that I'm saying!
		app.directive(
			"bnEmphasize",
			function() {

				// Return the directive configuration.
				return({
					compile: function( tElement, tAttributes ) {

						tElement.html( tElement.html().replace( /\./g, "!" ) );

						// Return the linking function.
						return(
							function link( scope, element, attributes ) {

								console.log( "Linking 1 for scope", scope.$id );

							}
						);

					},
					restrict: "A"
				});

			}
		);


		// I wrap the content in a Strong tag. How are people going to know that I mean
		// bid'ness unless the text is extra dark!
		app.directive(
			"bnEmphasize",
			function() {

				// Return the directive configuration.
				return({
					compile: function( tElement, tAttributes ) {

						// CAUTION: You cannot use .wrapInner() unless you include jQuery.
						// You don't get this kind of sweet-ass functionality with jQLite.
						tElement.wrapInner( "<strong></strong>" );

						// Return the linking function.
						return(
							function link( scope, element, attributes ) {

								console.log( "Linking 2 for scope", scope.$id );

							}
						);

					},
					restrict: "A"
				});

			}
		);


		// Bro! Bro! Nothing says "emphasis" like a Marquee. People love marquees. 
		// I wrap the content in a marquee for supreme classiness! 
		app.directive(
			"bnEmphasize",
			function() {

				// Return the directive configuration.
				return({
					compile: function( tElement, tAttributes ) {

						// CAUTION: You cannot use .wrapInner() unless you include jQuery.
						// You don't get this kind of sweet-ass functionality with jQLite.
						tElement.wrapInner( "<marquee></marquee>" );

						// Return the linking function.
						return(
							function link( scope, element, attributes ) {

								console.log( "Linking 3 for scope", scope.$id );

							}
						);

					},
					restrict: "A"
				});

			}
		);

	</script>

</body>
</html>