webpackJsonp([1],{14:function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var i,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,r,s):i(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=this&&this.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(e,"__esModule",{value:!0});var s=r(0),a=r(0),c=r(0),u=r(7);e.METRICS_PREFIX=new c.InjectionToken("Prefix added to all metrics."),e.METRICS_TAGS=new c.InjectionToken("Tags added to all metrics.");var p=function(){function MetricsService(t,e,r){this.metricsGateway=t,this.prefix=e,this.tags=r}return MetricsService.prototype.gauge=function(t,e){"string"==typeof t?this.metricsGateway.send({type:"gauge",metric:this.expandMetric(t),value:e,tags:this.tags}):this.metricsGateway.send({type:"gauge",metric:this.expandMetric(t.metric),value:t.value,tags:this.tags.concat(t.tags||[])})},MetricsService.prototype.histogram=function(t,e){"string"==typeof t?this.metricsGateway.send({type:"histogram",metric:this.expandMetric(t),value:e,tags:this.tags}):this.metricsGateway.send({type:"histogram",metric:this.expandMetric(t.metric),value:t.value,tags:this.tags.concat(t.tags||[])})},MetricsService.prototype.increment=function(t,e){"string"==typeof t?this.metricsGateway.send({type:"counter",metric:this.expandMetric(t),value:e||1,tags:this.tags}):this.metricsGateway.send({type:"counter",metric:this.expandMetric(t.metric),value:t.value,tags:this.tags.concat(t.tags||[])})},MetricsService.prototype.set=function(t,e){"string"==typeof t?this.metricsGateway.send({type:"set",metric:this.expandMetric(t),value:e,tags:this.tags}):this.metricsGateway.send({type:"set",metric:this.expandMetric(t.metric),value:t.value,tags:this.tags.concat(t.tags||[])})},MetricsService.prototype.timing=function(t,e){"string"==typeof t?this.metricsGateway.send({type:"timing",metric:this.expandMetric(t),value:e,tags:this.tags}):this.metricsGateway.send({type:"timing",metric:this.expandMetric(t.metric),value:t.value,tags:this.tags.concat(t.tags||[])})},MetricsService.prototype.expandMetric=function(t){return this.prefix+t},MetricsService=n([a.Injectable(),o(1,s.Inject(e.METRICS_PREFIX)),o(2,s.Inject(e.METRICS_TAGS)),i("design:paramtypes",[u.MetricsGateway,String,Array])],MetricsService)}();e.MetricsService=p},6:function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var i,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,r,s):i(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(e,"__esModule",{value:!0});var i=r(10),o=r(0),s=r(7),a=r(7),c=r(7);e.MetricsGateway=c.MetricsGateway;var u=r(7);e.RealtimeGateway=u.RealtimeGateway;var p=r(14),l=r(14),f=r(14);e.MetricsService=f.MetricsService;var d=r(8);e.ConsoleTransport=d.ConsoleTransport;var h=r(8),y=r(8);e.HttpTransport=y.HttpTransport;var v=r(8);e.MetricsTransport=v.MetricsTransport;var b=function(){function MetricsModule(){}return t=MetricsModule,MetricsModule.forRoot=function(e){return{ngModule:t,providers:[f.MetricsService,{provide:c.MetricsGateway,useClass:a.BufferedGateway},{provide:v.MetricsTransport,useClass:y.HttpTransport},{provide:p.METRICS_PREFIX,useValue:e&&e.prefix||""},{provide:l.METRICS_TAGS,useValue:e&&e.tags||[]},{provide:h.HTTP_TRANSPORT_URL,useValue:e&&e.url||"/"},{provide:s.BUFFERED_GATEWAY_DURATION,useValue:e&&e.bufferDuration||5e3}]}},MetricsModule=t=n([o.NgModule({imports:[i.HttpClientModule]})],MetricsModule);var t}();e.MetricsModule=b},62:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(25),i=r(63);n.platformBrowserDynamic().bootstrapModule(i.AppModule)},63:function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var i,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,r,s):i(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(e,"__esModule",{value:!0});var i=r(26),o=r(0),s=r(64),a=r(6),c=r(6),u=r(6),p=r(6),l=function(){function AppModule(){}return AppModule=n([o.NgModule({bootstrap:[s.AppComponent],imports:[i.BrowserModule,u.MetricsModule.forRoot({url:"http://localhost:8080/metrics-proxy",bufferDuration:5e3,prefix:"angular-app.",tags:["angular5"]})],declarations:[s.AppComponent],providers:[{provide:p.MetricsTransport,useClass:window.location.host.includes("github")?a.ConsoleTransport:c.HttpTransport}]})],AppModule)}();e.AppModule=l},64:function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var i,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,r,s):i(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),s=r(6),a=function(){function AppComponent(t){this.metrics=t,this.firstClickAt=null,this.isShowingbox=!1,this.loadedAt=Date.now(),this.metrics.set({metric:"users",value:4,tags:["app-load"]})}return AppComponent.prototype.hideBox=function(){this.isShowingbox&&this.metrics.increment("box.hide"),this.isShowingbox=!1},AppComponent.prototype.showBox=function(){this.isShowingbox||this.metrics.increment("box.show",1),this.firstClickAt||(this.firstClickAt=Date.now()-this.loadedAt,this.metrics.timing("interactions.first-click",this.firstClickAt)),this.isShowingbox=!0},AppComponent=n([o.Component({selector:"my-app",styles:[r(65)],template:'\n\t\t<p>\n\t\t\t<a (click)="showBox()">Show Box</a> &nbsp;|&nbsp;\n\t\t\t<a (click)="hideBox()">Hide Box</a>\n\t\t</p>\n\n\t\t<div *ngIf="isShowingbox" class="box">\n\n\t\t\tMetrics will be recorded as this box is toggled.\n\n\t\t</div>\n\t'}),i("design:paramtypes",[s.MetricsService])],AppComponent)}();e.AppComponent=a},65:function(t,e){t.exports=":host {\n  display: block ;\n  font-size: 18px ;\n}\na {\n  color: red ;\n  cursor: pointer ;\n  text-decoration: underline ;\n  user-select: none ;\n  -moz-user-select: none ;\n  -webkit-user-select: none ;\n}\ndiv.box {\n  background-color: #262626 ;\n  border: 2px solid #000000 ;\n  border-radius: 5px 5px 5px 5px ;\n  color: #FFFFFF ;\n  padding: 20px 20px 20px 20px ;\n  width: 300px ;\n}\n"},7:function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var i,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,r,s):i(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=this&&this.__param||function(t,e){return function(r,n){e(r,n,t)}},s=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(i,o){function fulfilled(t){try{step(n.next(t))}catch(t){o(t)}}function rejected(t){try{step(n.throw(t))}catch(t){o(t)}}function step(t){t.done?i(t.value):new r(function(e){e(t.value)}).then(fulfilled,rejected)}step((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){function verb(t){return function(e){return step([t,e])}}function step(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=n[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o};Object.defineProperty(e,"__esModule",{value:!0});var c=r(0),u=r(0),p=r(0),l=r(0),f=r(8),d=function(){function MetricsGateway(){}return MetricsGateway}();e.MetricsGateway=d,e.BUFFERED_GATEWAY_DURATION=new l.InjectionToken("Time (ms) that metrics will be buffered before getting flushed.");var h=function(){function BufferedGateway(t,e,r){this.errorHandler=e,this.transport=r,this.buffer=[],this.bufferDuration=t,this.bufferTimer=null,this.isSendingDataInputs=!1}return BufferedGateway.prototype.send=function(t){this.buffer.push(t),this.prepareToSendDataInputs()},BufferedGateway.prototype.prepareToSendDataInputs=function(){var t=this;!this.buffer.length||this.bufferTimer||this.isSendingDataInputs||(this.bufferTimer=setTimeout(function(){var e=t.buffer;t.buffer=[],t.bufferTimer=null,t.isSendingDataInputs=!0,t.sendDataInputs(e).then(function(){t.isSendingDataInputs=!1,t.prepareToSendDataInputs()})},this.bufferDuration))},BufferedGateway.prototype.sendDataInputs=function(t){return s(this,void 0,void 0,function(){var e;return a(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.transport.send(t)];case 1:return r.sent(),[3,3];case 2:return e=r.sent(),this.errorHandler.handleError(e),[3,3];case 3:return[2]}})})},BufferedGateway=n([p.Injectable(),o(0,u.Inject(e.BUFFERED_GATEWAY_DURATION)),i("design:paramtypes",[Number,c.ErrorHandler,f.MetricsTransport])],BufferedGateway)}();e.BufferedGateway=h;var y=function(){function RealtimeGateway(t,e){this.errorHandler=t,this.transport=e}return RealtimeGateway.prototype.send=function(t){var e=this;this.transport.send([t]).catch(function(t){e.errorHandler.handleError(t)})},RealtimeGateway=n([p.Injectable(),i("design:paramtypes",[c.ErrorHandler,f.MetricsTransport])],RealtimeGateway)}();e.RealtimeGateway=y},8:function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var i,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,r,s):i(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=this&&this.__param||function(t,e){return function(r,n){e(r,n,t)}},s=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(i,o){function fulfilled(t){try{step(n.next(t))}catch(t){o(t)}}function rejected(t){try{step(n.throw(t))}catch(t){o(t)}}function step(t){t.done?i(t.value):new r(function(e){e(t.value)}).then(fulfilled,rejected)}step((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){function verb(t){return function(e){return step([t,e])}}function step(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=n[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o};Object.defineProperty(e,"__esModule",{value:!0});var c=r(10),u=r(0),p=r(0),l=r(0),f=function(){function MetricsTransport(){}return MetricsTransport}();e.MetricsTransport=f,e.HTTP_TRANSPORT_URL=new l.InjectionToken("Full URL for HTTP transport.");var d=function(){function HttpTransport(t,e){this.httpClient=t,this.url=e}return HttpTransport.prototype.send=function(t){return s(this,void 0,void 0,function(){var e;return a(this,function(r){switch(r.label){case 0:return[4,this.httpClient.post(this.url,{dataInputs:t},{headers:{"Content-Type":"application/json; charset=UTF-8"}}).toPromise()];case 1:return e=r.sent(),[2]}})})},HttpTransport=n([p.Injectable(),o(1,u.Inject(e.HTTP_TRANSPORT_URL)),i("design:paramtypes",[c.HttpClient,String])],HttpTransport)}();e.HttpTransport=d;var h=function(){function ConsoleTransport(){}return ConsoleTransport.prototype.send=function(t){return s(this,void 0,void 0,function(){var e,r,n;return a(this,function(i){for(console.group("Metrics - ConsoleTransport"),e=0,r=t;e<r.length;e++)n=r[e],console.log(n);return console.groupEnd(),[2]})})},ConsoleTransport}();e.ConsoleTransport=h}},[62]);