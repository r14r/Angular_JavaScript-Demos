webpackJsonp([1],{136:function(e,t){e.exports='\n:host {\n\tdisplay: block ;\n\tfont-size: 16px ;\n}\n\n:host >>> a {\n\tcolor: red ;\n\tcursor: pointer ;\n\ttext-decoration: underline ;\n\tuser-select: none ;\n\t\t-moz-user-select: none ;\n\t\t-webkit-user-select: none ;\n}\n\nhr {\n\tmargin: 30px 0px 30px 0px ;\n}\n\nul {\n\tfont-size: 18px ;\n}\n\nform {\n\tfont-size: inherit ;\n}\n\ninput {\n\tfont-size: inherit ;\n}\n\ninput[ type = "text" ] {\n\twidth: 400px ;\n}'},160:function(e,t,s){"use strict";var n=this&&this.__decorate||function(e,t,s,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,s):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,s,n);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(a=(o<3?r(a):o>3?r(t,s,a):r(t,s))||a);return o>3&&a&&Object.defineProperty(t,s,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=s(9),a=s(23),i=function(){function e(e){this.messageGateway=e,this.form={message:""},this.messages=[]}return e.prototype.addMessage=function(){this.form.message&&(this.messageGateway.createMessage({text:this.form.message,createdAt:new Date}),this.form.message="")},e.prototype.deleteMessage=function(e){this.messageGateway.deleteMessage(e.id)},e.prototype.ngOnInit=function(){var e=this;this.messageGateway.readMessagesAsStream().subscribe(function(t){e.messages=t},function(e){console.warn("Read Message As Stream Error"),console.error(e)})},e}();i=n([o.Component({selector:"my-app",styles:[s(136)],template:'\n\t\t<h2>\n\t\t\tYou Have {{ messages.length }} Message(s)!\n\t\t</h2>\n\n\t\t<ul *ngIf="messages.length">\n\t\t\t<li\n\t\t\t\t*ngFor="let message of messages"\n\t\t\t\ttitle="Created at {{ message.createdAt.toTimeString() }}">\n\n\t\t\t\t{{ message.text }} &mdash; \n\t\t\t\t<a (click)="deleteMessage( message )">Delete</a>\n\n\t\t\t</li>\n\t\t</ul>\n\n\t\t<form (submit)="addMessage()">\n\t\t\t<input type="text" name="message" [(ngModel)]="form.message" autofocus />\n\t\t\t<input type="submit" value="Add Message" />\n\t\t</form>\n\n\t\t<hr />\n\n\t\t<h2>\n\t\t\tChoose A Gateway Implementation\n\t\t</h2>\n\n\t\t<ul>\n\t\t\t<li><a href="./index.htm?default">In-Memory Gateway</a></li>\n\t\t\t<li><a href="./index.htm?localstorage">LocalStorage Gateway</a></li>\n\t\t\t<li><a href="./index.htm?firebase">Firebase Gateway</a></li>\n\t\t</ul>\n\n\t\t<p>\n\t\t\tNote that all of these implementations provide a "stream" I/O method.\n\t\t</p>\n\t'}),r("design:paramtypes",[a.MessageGateway])],i),t.AppComponent=i},161:function(e,t,s){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])};return function(t,s){function n(){this.constructor=t}e(t,s),t.prototype=null===s?Object.create(s):(n.prototype=s.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=s(20),o=s(6);s(46);var a=s(23),i=function(e){function t(){var t=e.call(this)||this;return t.firebaseApp=r.initializeApp({apiKey:"AIzaSyBL208rmWno59jE2k5xSFkRH7D3NIDH6C0",authDomain:"popping-torch-33.firebaseapp.com",databaseURL:"https://popping-torch-33.firebaseio.com",projectId:"popping-torch-33",storageBucket:"popping-torch-33.appspot.com",messagingSenderId:"254167194432"}),t.firebaseDB=t.firebaseApp.database(),t}return n(t,e),t.prototype.createMessage=function(e){var t=this.firebaseDB.ref("/2017-09-03/").push(),s={id:t.key,text:e.text,createdAt:e.createdAt.getTime()};return t.set(s).catch(function(e){console.log("Create Message Failed"),console.error(e),console.log("Transfer Object:"),console.dir(s)}),Promise.resolve(t.key)},t.prototype.deleteMessage=function(e){return this.firebaseDB.ref("/2017-09-03/"+e).remove().catch(function(t){console.log("Delete Message Failed"),console.error(t),console.log("ID:",e)}),Promise.resolve()},t.prototype.readMessages=function(){return this.firebaseDB.ref("/2017-09-03/").once("value").then(function(e){var t=[];return e.exists()?(e.forEach(function(e){var s=e.val();return t.push({id:s.id,text:s.text,createdAt:new Date(s.createdAt)}),!1}),t):t})},t.prototype.readMessagesAsStream=function(){var e=this;return new o.Observable(function(t){function s(){n.off("value",r),n=r=null}var n=e.firebaseDB.ref("/2017-09-03/"),r=n.on("value",function(e){var s=[];if(!e.exists())return void t.next(s);e.forEach(function(e){var t=e.val();return s.push({id:t.id,text:t.text,createdAt:new Date(t.createdAt)}),!1}),t.next(s)});return s})},t}(a.MessageGateway);t.FirebaseMessageGateway=i},162:function(e,t,s){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])};return function(t,s){function n(){this.constructor=t}e(t,s),t.prototype=null===s?Object.create(s):(n.prototype=s.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=s(33),o=s(23),a=function(e){function t(){var t=e.call(this)||this;return t.messages=[],t.subject=new r.BehaviorSubject([]),t.uid=0,t}return n(t,e),t.prototype.createMessage=function(e){var t={id:this.newID(),text:e.text,createdAt:e.createdAt.getTime()};return this.messages.push(t),this.emitMessages(),Promise.resolve(t.id)},t.prototype.deleteMessage=function(e){return this.messages=this.messages.filter(function(t){return t.id!==e}),this.emitMessages(),Promise.resolve()},t.prototype.readMessages=function(){var e=this.messages.map(function(e){return{id:e.id,text:e.text,createdAt:new Date(e.createdAt)}});return Promise.resolve(e)},t.prototype.readMessagesAsStream=function(){return this.emitMessages(),this.subject.asObservable()},t.prototype.emitMessages=function(){var e=this;this.readMessages().then(function(t){e.subject.next(t)})},t.prototype.newID=function(){return"id-"+ ++this.uid},t}(o.MessageGateway);t.InMemoryMessageGateway=a},163:function(e,t,s){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])};return function(t,s){function n(){this.constructor=t}e(t,s),t.prototype=null===s?Object.create(s):(n.prototype=s.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=s(33),o=s(23),a=function(e){function t(){var t=e.call(this)||this;return t.storageKey="ng4-demo-firebase-encapsulation",t.subject=new r.BehaviorSubject([]),window.addEventListener("storage",function(e){e.key===t.storageKey&&t.emitMessages()}),t}return n(t,e),t.prototype.createMessage=function(e){var t=this;return new Promise(function(s,n){var r={id:t.newID(),text:e.text,createdAt:e.createdAt.getTime()},o=t.getMessagesFromLocalStorage();o.push(r),t.setMessagesToLocalStorage(o),t.emitMessages(),s(r.id)})},t.prototype.deleteMessage=function(e){var t=this;return new Promise(function(s,n){var r=t.getMessagesFromLocalStorage().filter(function(t){return t.id!==e});t.setMessagesToLocalStorage(r),t.emitMessages(),s()})},t.prototype.readMessages=function(){var e=this;return new Promise(function(t,s){t(e.getMessagesFromLocalStorage().map(function(e){return{id:e.id,text:e.text,createdAt:new Date(e.createdAt)}}))})},t.prototype.readMessagesAsStream=function(){return this.emitMessages(),this.subject.asObservable()},t.prototype.emitMessages=function(){var e=this;this.readMessages().then(function(t){e.subject.next(t)})},t.prototype.getMessagesFromLocalStorage=function(){var e=localStorage.getItem(this.storageKey);return e?JSON.parse(e):[]},t.prototype.newID=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=[],s=0;s<30;s++)t.push(e.charAt(Math.floor(Math.random()*Date.now())%e.length));return"m"+t.join("")},t.prototype.setMessagesToLocalStorage=function(e){localStorage.setItem(this.storageKey,JSON.stringify(e))},t}(o.MessageGateway);t.LocalStorageMessageGateway=a},165:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(35),r=s(89);n.platformBrowserDynamic().bootstrapModule(r.AppModule)},23:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e}();t.MessageGateway=n},89:function(e,t,s){"use strict";var n=this&&this.__decorate||function(e,t,s,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,s):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,s,n);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(a=(o<3?r(a):o>3?r(t,s,a):r(t,s))||a);return o>3&&a&&Object.defineProperty(t,s,a),a};Object.defineProperty(t,"__esModule",{value:!0});var r=s(43),o=s(47),a=s(9),i=s(160),c=s(161),u=s(162),p=s(23),f=s(163),l=function(){function e(){}return e}();l=n([a.NgModule({bootstrap:[i.AppComponent],imports:[r.BrowserModule,o.FormsModule],declarations:[i.AppComponent],providers:[function(){switch(window.location.search){case"?localstorage":return{provide:p.MessageGateway,useClass:f.LocalStorageMessageGateway};case"?firebase":return{provide:p.MessageGateway,useClass:c.FirebaseMessageGateway};default:return{provide:p.MessageGateway,useClass:u.InMemoryMessageGateway}}}()]})],l),t.AppModule=l}},[165]);